{"version":"5","defaultTimeframe":{"from":"now-2h","to":"now","details":{"from":{"type":"expression","normalized":"now-2h","date":"2023-10-17T12:13:21.535Z"},"to":{"type":"expression","normalized":"now","date":"2023-10-17T14:13:21.535Z"}}},"sections":[{"id":"7df0fafd-a56d-4eaf-ad70-f9c8a40be89b","type":"markdown","markdown":"# Restiming spec\n\n[W3C Resource Timing](https://www.w3.org/TR/resource-timing/#dom-performanceresourcetiming)\n\n![https://www.w3.org/TR/resource-timing-1/resource-timing-overview-1.png](https://www.w3.org/TR/resource-timing-1/resource-timing-overview-1.png)\n","state":{"input":{"timeframe":{"from":"now-2h","to":"now"}},"visualizationSettings":{"chartSettings":{"gapPolicy":"connect"}},"showConsole":true,"state":"idle","davis":{"includeLogs":true,"isDavisVisualizationAvailable":true,"davisVisualization":{"isAvailable":true}}},"hasContent":true,"showTitle":false},{"id":"2ec2c53c-200a-49d8-a615-a6c7aa916088","type":"dql","showTitle":false,"davisAnalysis":{"analyzerComponentState":{"resultState":{}}},"state":{"input":{"timeframe":{"from":"now-30m","to":"now","details":{"from":{"type":"expression","normalized":"now-30m","date":"2023-09-21T09:31:17.637Z"},"to":{"type":"expression","normalized":"now","date":"2023-09-21T10:01:17.637Z"}}},"value":" fetch events \n | filter event.kind==\"RUM_EVENT\" \n | filter event.type==\"request\" \n | filter isNull(event.provider) //filter for 3g native events only (vs forwarded events)\n | parse url.full,\"('http://' | 'https://') LD:domain '/' \"\n | filter dt.rum.application.id==\"925a8ee59d39f27d\" //Platform UI- DEv application\n | filter isNotNull(domain) // filter out resources with data:, javascript:. etc\n //| filter contains(url.full,\"zxz75421.dev.apps.dynatracelabs.com\")\n\n //| filter duration_ms<0\n //| fields url.full, duration_ms, response_end \n\n\n | limit 20\n"},"visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"firstVisibleRowIndex":0,"columnWidths":{}},"honeycomb":{"shape":"hexagon","legend":"auto"}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"showConsole":true,"davis":{"includeLogs":true,"isDavisVisualizationAvailable":true,"davisVisualization":{"isAvailable":true}}}},{"id":"427ecbdc-742c-428a-839c-d6be990fa5dd","type":"markdown","markdown":"# Slowest resource provider","state":{"input":{"timeframe":{"from":"now-2h","to":"now"}},"visualizationSettings":{"chartSettings":{"gapPolicy":"connect"}},"showConsole":true,"state":"idle","davis":{"includeLogs":true,"isDavisVisualizationAvailable":true,"davisVisualization":{"isAvailable":true}}},"hasContent":true,"showTitle":false},{"id":"a05a78d5-c812-44fc-a3fe-8df3d28a6124","type":"dql","showTitle":false,"davisAnalysis":{"analyzerComponentState":{"resultState":{}}},"state":{"input":{"timeframe":{"from":"now-2h","to":"now"},"value":"fetch events \n| filter event.kind==\"RUM_EVENT\" \n| filter event.type==\"request\"\n| filter isNull(event.provider) //filter for 3g native events only (vs forwarded events)\n| filter isNotNull(response_end)\n| filter isNotNull(performance_entry.start_time)\n| filter dt.rum.application.id==\"925a8ee59d39f27d\" //Platform UI- DEv application\n| parse url.full,\"('http://' | 'https://') LD:domain '/' \"\n| SUMMARIZE  {cnt = count(), AvgLoadTime = avg(response_end-performance_entry.start_time), AvgDuration = avg(duration_ms)}, by: {domain}\n| SORT AvgLoadTime desc\n| LIMIT 30"},"visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"firstVisibleRowIndex":0,"columnWidths":{}},"honeycomb":{"shape":"hexagon","legend":"auto"}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"showConsole":true,"davis":{"includeLogs":true,"isDavisVisualizationAvailable":true,"davisVisualization":{"isAvailable":true}}}},{"id":"ac4928de-4933-41bd-967f-3dd35b023a4a","type":"markdown","markdown":"# Slowest resources","state":{"input":{"timeframe":{"from":"now-2h","to":"now"}},"visualizationSettings":{"chartSettings":{"gapPolicy":"connect"}},"showConsole":true,"state":"idle","davis":{"includeLogs":true,"isDavisVisualizationAvailable":true,"davisVisualization":{"isAvailable":true}}},"hasContent":true,"showTitle":false},{"id":"0405e41e-68db-4d30-bde4-fb87ae402a2c","type":"dql","showTitle":false,"davisAnalysis":{"analyzerComponentState":{"resultState":{}}},"state":{"input":{"timeframe":{"from":"now-2h","to":"now"},"value":"fetch events \n| filter event.kind==\"RUM_EVENT\" \n| filter event.type==\"request\"\n| filter isNull(event.provider) //filter for 3g native events only (vs forwarded events)\n| filter isNotNull(response_end)\n| filter isNotNull(performance_entry.start_time)\n| SUMMARIZE  {cnt = count(), AvgLoadTime = avg(response_end-performance_entry.start_time), AvgEncodedBodySize = avg(encoded_body_size)} , by: {url.full}\n| SORT AvgLoadTime*cnt desc\n| LIMIT 30"},"visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"firstVisibleRowIndex":0,"columnWidths":{}},"honeycomb":{"shape":"hexagon","legend":"auto"}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"showConsole":true,"davis":{"includeLogs":true,"isDavisVisualizationAvailable":true,"davisVisualization":{"isAvailable":true}}}},{"id":"ffb6c51a-034f-43dc-a581-91e27de98f3c","type":"markdown","markdown":"# DNS times: slowest lookup per domain ","state":{"input":{"timeframe":{"from":"now-2h","to":"now"}},"visualizationSettings":{"chartSettings":{"gapPolicy":"connect"}},"showConsole":true,"state":"idle","davis":{"includeLogs":true,"isDavisVisualizationAvailable":true,"davisVisualization":{"isAvailable":true}}},"hasContent":true,"showTitle":false},{"id":"4fc52ff8-131f-4c99-86d7-f035cb75ae1d","type":"dql","showTitle":false,"davisAnalysis":{"analyzerComponentState":{"resultState":{}}},"state":{"input":{"timeframe":{"from":"now-2h","to":"now","details":{"from":{"type":"expression","normalized":"now-2h","date":"2023-10-17T12:13:21.535Z"},"to":{"type":"expression","normalized":"now","date":"2023-10-17T14:13:21.535Z"}}},"value":"fetch events \n| filter event.kind==\"RUM_EVENT\" \n| filter event.type==\"request\"\n| filter isNull(event.provider) //filter for 3g native events only (vs forwarded events)\n| filter isNotNull(domain_lookup_start)\n| filter isNotNull(domain_lookup_end)\n| parse url.full,\"('http://' | 'https://') LD:domain '/' \"\n| SUMMARIZE {cnt = count(), DNSTime = avg(domain_lookup_end-domain_lookup_start)}, by: {domain}\n| SORT DNSTime*cnt desc\n| limit 30"},"visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"firstVisibleRowIndex":0,"columnWidths":{}},"honeycomb":{"shape":"hexagon","legend":"auto"}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"showConsole":true,"davis":{"includeLogs":true,"isDavisVisualizationAvailable":true,"davisVisualization":{"isAvailable":true}}}},{"id":"46970a69-36f3-46a9-a508-6724f967c186","type":"markdown","markdown":"# Servertime: resource with largest avg server time (estimated)","state":{"input":{"timeframe":{"from":"now-2h","to":"now"}},"visualizationSettings":{"chartSettings":{"gapPolicy":"connect"}},"showConsole":true,"state":"idle","davis":{"includeLogs":true,"isDavisVisualizationAvailable":true,"davisVisualization":{"isAvailable":true}}},"hasContent":true,"showTitle":false},{"id":"f4251d3c-c761-4213-b6b3-8556fa2a14f6","type":"dql","showTitle":false,"davisAnalysis":{"analyzerComponentState":{"resultState":{}}},"state":{"input":{"timeframe":{"from":"now-2h","to":"now"},"value":"fetch events \n| filter event.kind==\"RUM_EVENT\" \n| filter event.type==\"request\"\n| filter isNull(event.provider) //filter for 3g native events only (vs forwarded events)\n| filter isNotNull(request_start)\n| filter isNotNull(response_start)\n| filter isNotNull(url.full)\n| SUMMARIZE  {cnt = count(), servertime = avg(toLong(response_start)-toLong(request_start))}, by: {url.full}\n| SORT servertime*cnt desc\n| LIMIT 30"},"visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"firstVisibleRowIndex":0,"columnWidths":{}},"honeycomb":{"shape":"hexagon","legend":"auto"}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"showConsole":true,"davis":{"includeLogs":true,"isDavisVisualizationAvailable":true,"davisVisualization":{"isAvailable":true}}}},{"id":"6cc26e7b-fed7-4795-a0d3-b97ca0803815","type":"markdown","markdown":"# Largest resources","hasContent":true,"showTitle":false},{"id":"e7ea7b88-9fb1-40fa-ab5a-657d18b27e88","type":"dql","showTitle":false,"davisAnalysis":{"analyzerComponentState":{"resultState":{}}},"state":{"input":{"timeframe":{"from":"now-7d","to":"now"},"value":"fetch events \n| filter event.kind==\"RUM_EVENT\" \n| filter event.type==\"request\"\n| filter isNull(event.provider) //filter for 3g native events only (vs forwarded events)\n| filter isNotNull(encoded_body_size)\n| filter isNotNull(decoded_body_size)\n| filter not contains(url.full,\"localhost:\")\n| filter not contains(url.full,\"http://10.\") //filter out local network adresses. seem to be dev experiments\n//| filter contains(url.full,\"dev.apps.dynatracelabs.com\") //enable this filter for just getting resources for apps (Note: not yet reliable monitoring data segregation per platform app)\n| filter not contains(url.full,\"dev.apps.dynatracelabs.com/platform/storage/query\") and not contains(url.full,\"/dql/query\") //enable this filter to exclude grail query fetches\n| SUMMARIZE {cnt = count(), msz = avg(encoded_body_size), compressionRate = avg(encoded_body_size/decoded_body_size*100)}, by: {url.full}\n| SORT msz desc\n| LIMIT 200\n"},"visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"firstVisibleRowIndex":0,"columnWidths":{}},"honeycomb":{"shape":"hexagon","legend":"auto"}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"showConsole":true,"davis":{"includeLogs":true,"isDavisVisualizationAvailable":true,"davisVisualization":{"isAvailable":true}}}}]}